<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>add and remove programs</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style>
body { font:80% Verdana,Tahoma,Arial,sans-serif; }
h1, h2, h3, h4 {  font-family: "Trebuchet MS",Georgia,"Times New Roman",serif; }
ul.toc { padding: 4px; margin-left: 0; }
ul.toc li { list-style-type:none; }
ul.toc li.heading2 { margin-left: 1em; }
ul.toc li.heading3 { margin-left: 2em; }
a.wiki-anchor { display: none; margin-left: 6px; text-decoration: none; }
a.wiki-anchor:hover { color: #aaa !important; text-decoration: none; }
h1:hover a.wiki-anchor, h2:hover a.wiki-anchor, h3:hover a.wiki-anchor { display: inline; color: #ddd; }
pre {font-size:133% }
</style>
</head>
<body>
<h1 id="Установка-и-удаление-программ">Установка и удаление программ<a href="#Установка-и-удаление-программ" class="wiki-anchor">&para;</a></h1>


	<ul class="toc"><li class="heading1"><a href="#Установка-и-удаление-программ">Установка и удаление программ</a></li>
<li class="heading2"><a href="#Обновление-дерева-портежей">Обновление дерева портежей</a></li>
<li class="heading2"><a href="#Поиск-программ">Поиск программ</a></li>
<li class="heading2"><a href="#Установка-и-удаление">Установка и удаление</a></li>
<li class="heading2"><a href="#Размаскировка-программ">Размаскировка программ</a></li>
<li class="heading3"><a href="#1-Проверим-доступные-версии">1. Проверим доступные версии</a></li>
<li class="heading3"><a href="#2-Размаскируем-устанавливаемые-пакеты-с-зависимостями">2. Размаскируем устанавливаемые пакеты с зависимостями</a></li>
<li class="heading3"><a href="#3-Установим-программу">3. Установим программу</a></li>
</ul>


	<h2 id="Обновление-дерева-портежей">Обновление дерева портежей<a href="#Обновление-дерева-портежей" class="wiki-anchor">&para;</a></h2>


	<p>Перед установкой программ обновите локальный репозиторий пакетов. Обновлять репозиторий следует не чаще 1 раза в день.</p>


	<p>Для обновления достаточно выполнить с правами пользователя root команду:</p>


<pre>
cl-update --sync-only
</pre>

	<p>Программа обновит дерево портежей, оверлей Calculate, а затем синхронизирует свой локальный кэш, используемый при поиске программ.</p>


	<h2 id="Поиск-программ">Поиск программ<a href="#Поиск-программ" class="wiki-anchor">&para;</a></h2>


	<p>В программу <code>emerge</code> включен инструмент поиска программ, однако вы можете воспользоваться более быстрым инструментом - программой <code>eix</code>.</p>


	<p>Пример:<br /><pre>
eix freeciv
eix -S game
</pre></p>


	<p>В первом случае поиск производится по названию пакета, во втором - по описанию.</p>


	<h2 id="Установка-и-удаление">Установка и удаление<a href="#Установка-и-удаление" class="wiki-anchor">&para;</a></h2>


	<p>Установка и удаление программ производится при помощи программы <a href=".html" class="wiki-page">emerge</a>. При установке новой программы сначала определяется необходимость в установке дополнительных пакетов (зависимостей), а затем скачиваются и компилируются исходные тексты. Помните, что для установки программ вам потребуется наличие интернета и некоторое время для компиляции. Программы, требующие значительного времени для компиляции (например, LibreOffice), распространяются в виде готовых к установке бинарных пакетов; их можно опознать по суффиксу "-bin".</p>


	<p>Пример установки игры "Цивилизация" и бинарного LibreOffice:</p>


<pre>
emerge -bk games-strategy/freeciv
emerge libreoffice-bin
</pre>

	<p>Параметры <code>-bk</code> создают локальный архив скомпилированного пакета, а при его наличии программа устанавливается из этого архива, минуя стадию компиляции. Инструкцию по работе с программой <code>emerge</code> можно прочесть <a href="здесь.html" class="wiki-page">здесь</a>.</p>


	<p>Пример удаления игры "Цивилизация":<br /><pre>
emerge -C games-strategy/freeciv
</pre></p>


	<p>Переменные <code>DISTDIR</code> и <code>PKGDIR</code> указывают путь к локальным папкам, в которых сохраняются исходные тексты программ и откомпилированные пакеты. Посмотреть значения этих (и многих других) переменных, используемых <code>emerge</code>, можно с помощью команды<br /><pre>
emerge --info
</pre></p>


	<h2 id="Размаскировка-программ">Размаскировка программ<a href="#Размаскировка-программ" class="wiki-anchor">&para;</a></h2>


	<p>Как правило, портежи содержат несколько версий программы, часть из которых отмечены как нестабильные. Нестабильная версия вовсе не означает, что она нестабильно работает - просто на данный момент эта версия не прошла достаточного тестирования. Вы можете установить как стабильную, так и нестабильную версию программы.</p>


	<p>Для установки нестабильных программ их нужно предварительно размаскировать. Для примера установим нестабильный на данный момент Firefox 22.0.</p>


	<h3 id="1-Проверим-доступные-версии">1. Проверим доступные версии<a href="#1-Проверим-доступные-версии" class="wiki-anchor">&para;</a></h3>


<pre>
eix firefox
 www-client/firefox
     Available versions:  *10.0.11 17.0.5 17.0.6 17.0.7 ~21.0 ~22.0
...
</pre>

	<h3 id="2-Размаскируем-устанавливаемые-пакеты-с-зависимостями">2. Размаскируем устанавливаемые пакеты с зависимостями<a href="#2-Размаскируем-устанавливаемые-пакеты-с-зависимостями" class="wiki-anchor">&para;</a></h3>


	<p>Удостоверьтесь, что директория <code>/etc/portage/package.keywords/</code> не пустая, иначе выполните:</p>


	<pre><code>touch /etc/portage/package.{keywords,unmask,use}/custom</code></pre>


	<p>Выполните размаскировку:</p>


	<pre><code>emerge --autounmask-write =www-client/firefox-22.0</code></pre>


	<p>Обновите настройки:</p>


	<pre><code>dispatch-conf</code></pre>


	<p>Нажмите <code>"u"</code> для подтверждения внесенных изменений.</p>


	<h3 id="3-Установим-программу">3. Установим программу<a href="#3-Установим-программу" class="wiki-anchor">&para;</a></h3>


<pre>
emerge firefox
</pre>
</body>
</html>
