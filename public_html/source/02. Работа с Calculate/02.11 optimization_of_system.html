<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>optimization of system</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style>
body { font:80% Verdana,Tahoma,Arial,sans-serif; }
h1, h2, h3, h4 {  font-family: "Trebuchet MS",Georgia,"Times New Roman",serif; }
ul.toc { padding: 4px; margin-left: 0; }
ul.toc li { list-style-type:none; }
ul.toc li.heading2 { margin-left: 1em; }
ul.toc li.heading3 { margin-left: 2em; }
a.wiki-anchor { display: none; margin-left: 6px; text-decoration: none; }
a.wiki-anchor:hover { color: #aaa !important; text-decoration: none; }
h1:hover a.wiki-anchor, h2:hover a.wiki-anchor, h3:hover a.wiki-anchor { display: inline; color: #ddd; }
pre {font-size:133% }
</style>
</head>
<body>
<h1 id="Оптимизация-системы">Оптимизация системы<a href="#Оптимизация-системы" class="wiki-anchor">&para;</a></h1>


	<ul class="toc"><li class="heading1"><a href="#Оптимизация-системы">Оптимизация системы</a></li>
<li class="heading2"><a href="#Ускорение-загрузки">Ускорение загрузки</a></li>
<li class="heading2"><a href="#Ускорение-запуска-приложений">Ускорение запуска приложений</a></li>
<li class="heading3"><a href="#prelink">prelink</a></li>
<li class="heading3"><a href="#preload">preload</a></li>
<li class="heading2"><a href="#Повышение-производительности">Повышение производительности</a></li>
<li class="heading2"><a href="#Уменьшение-размера-дистрибутива">Уменьшение размера дистрибутива</a></li>
<li class="heading3"><a href="#Удаление-неиспользуемых-языков">Удаление неиспользуемых языков</a></li>
<li class="heading3"><a href="#Высвобождение-дополнительного-места">Высвобождение дополнительного места</a></li>
</ul>


	<h2 id="Ускорение-загрузки">Ускорение загрузки<a href="#Ускорение-загрузки" class="wiki-anchor">&para;</a></h2>


	<p>Calculate Linux использует для загрузки <em>OpenRC</em>. Благодаря переходу на бинарные утилиты загрузки и дополнительной оптимизации производительность существенно выросла, система стала загружаться значительно быстрее. В OpenRC предусмотрен режим параллельной загрузки, которая теперь включена по умолчанию в файле <code>/etc/rc.conf</code>:</p>


<pre>
rc_parallel="YES" 
</pre>

	<h2 id="Ускорение-запуска-приложений">Ускорение запуска приложений<a href="#Ускорение-запуска-приложений" class="wiki-anchor">&para;</a></h2>


	<h3 id="prelink">prelink<a href="#prelink" class="wiki-anchor">&para;</a></h3>


	<p><code>prelink</code> - механизм предварительного связывания пакетов. Выполняется при сборке всех дистрибутивов Calculate Linux. В CLD/CLDX 9.9 <code>prelink</code> был добавлен в <code>cron</code> и теперь выполняется по расписанию. Включается в файле <code>/etc/conf.d/prelink</code> опцией:</p>


<pre>
PRELINKING="yes" 
</pre>

	<h3 id="preload">preload<a href="#preload" class="wiki-anchor">&para;</a></h3>


	<p>Начиная с версии 9.9, Calculate Linux Desktop включает утилиту <code>preload</code>. Работа программы становится заметной спустя некоторое время. Стартуя в <em>boot</em>-уровне загрузки, демон на протяжении всей работы компьютера анализирует время работы приложений. Впоследствии он уже сам подгружает необходимые программы и библиотеки в кэш памяти.</p>


	<p>Благодаря тому, что <code>preload</code> занимает кэш дисковой системы, это не препятствует обычной работе - более того, ускоряет не только запуск отдельных приложений, но и загрузку системы в целом, создавая подобие параллельной загрузки.</p>


	<h2 id="Повышение-производительности">Повышение производительности<a href="#Повышение-производительности" class="wiki-anchor">&para;</a></h2>


	<p>Дистрибутивы Calculate Linux собраны с флагом компиляции, позволяющим запускать систему на любых <a href=".html" class="wiki-page">i686</a> и <a href=".html" class="wiki-page">x86_64</a>-совместимых процессорах. Вы можете несколько улучшить производительность вновь собранных пакетов, раскомментировав новые значения переменных <code>CFLAGS</code> и <code>CXXFLAGS</code> в файле <code>/etc/make.conf</code>:</p>


<pre>
CFLAGS="-O2 -march=native -pipe" 
CXXFLAGS="${CFLAGS}" 
</pre>

	<p>Для повышения производительности системы в целом необходима пересборка всех пакетов.</p>


<pre>
emerge -e system
emerge -e world
</pre>

	<p>Будьте внимательны, пересборка пакетов может потребовать определенного опыта, в случае если придется разрешать зависимости во время сборки. При выполнении будут загружены и скомпилированы все пакеты программ, входящие в дистрибутив. На выполнение может потребоваться от 5 часов и более, в зависимости от дистрибутива и производительности компьютера.</p>


	<h2 id="Уменьшение-размера-дистрибутива">Уменьшение размера дистрибутива<a href="#Уменьшение-размера-дистрибутива" class="wiki-anchor">&para;</a></h2>


	<h3 id="Удаление-неиспользуемых-языков">Удаление неиспользуемых языков<a href="#Удаление-неиспользуемых-языков" class="wiki-anchor">&para;</a></h3>


	<p>Calculate Linux собирается с поддержкой нескольких языков. Тем не менее после установки системы в переменной LINGUAS файла <code>/etc/make.conf</code> можно оставить только нужный язык или языки.</p>


	<p>Пример:<br /><pre>
LINGUAS="en ru" 
</pre></p>


	<p>Для удаления из системы неиспользуемых языковых файлов потребуется обновление, которое будет заключаться в пересборке большого количества пакетов. Обратите внимание, что, если вы переопределите данную переменную в <code>/etc/make.conf</code>, все затронутые бинарные пакеты отныне всегда будут компилироваться.</p>


	<h3 id="Высвобождение-дополнительного-места">Высвобождение дополнительного места<a href="#Высвобождение-дополнительного-места" class="wiki-anchor">&para;</a></h3>


	<p>Если вы готовите систему к установке и планируете в дальнейшем обновлять только из бинарных пакетов собственной сборки, вы можете существенно сократить объем LiveСD-образа, удалив исходники ядра, портежи и, возможно, сам компилятор <code>gcc</code>.</p>


Вы можете выиграть в объеме, удалив:
	<ul>
	<li>Portage : 35Mb в образе и 513Mb после установки</li>
		<li>исходники ядра : 76Мб в образе и 367Mb в установленной системе</li>
	</ul>
</body>
</html>
