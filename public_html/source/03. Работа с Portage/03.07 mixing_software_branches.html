<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>mixing software branches</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style>
body { font:80% Verdana,Tahoma,Arial,sans-serif; }
h1, h2, h3, h4 {  font-family: "Trebuchet MS",Georgia,"Times New Roman",serif; }
ul.toc { padding: 4px; margin-left: 0; }
ul.toc li { list-style-type:none; }
ul.toc li.heading2 { margin-left: 1em; }
ul.toc li.heading3 { margin-left: 2em; }
a.wiki-anchor { display: none; margin-left: 6px; text-decoration: none; }
a.wiki-anchor:hover { color: #aaa !important; text-decoration: none; }
h1:hover a.wiki-anchor, h2:hover a.wiki-anchor, h3:hover a.wiki-anchor { display: inline; color: #ddd; }
pre {font-size:133% }
</style>
</head>
<body>
<h1 id="Смешение-ветвей-программного-обеспечения">Смешение ветвей программного обеспечения<a href="#Смешение-ветвей-программного-обеспечения" class="wiki-anchor">&para;</a></h1>


	<ul class="toc"><li class="heading1"><a href="#Смешение-ветвей-программного-обеспечения">Смешение ветвей программного обеспечения</a></li>
<li class="heading2"><a href="#Использование-одной-ветви">Использование одной ветви</a></li>
<li class="heading3"><a href="#Стабильная-ветвь">Стабильная ветвь</a></li>
<li class="heading3"><a href="#Тестовая-ветвь">Тестовая ветвь</a></li>
<li class="heading2"><a href="#Одновременное-использование-стабильной-и-тестовой-ветвей">Одновременное использование стабильной и тестовой ветвей</a></li>
<li class="heading3"><a href="#Местоположение-packagekeywords">Местоположение package.keywords</a></li>
<li class="heading3"><a href="#Тестирование-определенных-версий">Тестирование определенных версий</a></li>
<li class="heading2"><a href="#Использование-заблокированных-пакетов">Использование заблокированных пакетов</a></li>
<li class="heading3"><a href="#Расположение-packageunmask">Расположение package.unmask</a></li>
<li class="heading3"><a href="#Местоположение-packagemask">Местоположение package.mask</a></li>
</ul>


	<h2 id="Использование-одной-ветви">Использование одной ветви<a href="#Использование-одной-ветви" class="wiki-anchor">&para;</a></h2>


	<h3 id="Стабильная-ветвь">Стабильная ветвь<a href="#Стабильная-ветвь" class="wiki-anchor">&para;</a></h3>


	<p>Переменная <code>ACCEPT_KEYWORDS</code> определяет, какую из ветвей использовать в вашей системе. По умолчанию используется стабильная ветвь для вашей архитектуры, например <span class="bluecode" >x86</span>.</p>


	<h3 id="Тестовая-ветвь">Тестовая ветвь<a href="#Тестовая-ветвь" class="wiki-anchor">&para;</a></h3>


	<p>Если вы желаете использовать наиболее свежее ПО, подумайте над использованием тестовой ветви. Чтобы Portage начала использовать тестовую ветвь, добавьте «~» перед названием вашей архитектуры.</p>


	<p>Тестовая ветвь полностью соответствует своему названию: для тестирования. Если пакет находится в стадии тестирования, это означает, что разработчики считают, что пакет работоспособен, но тщательно он не протестирован. Вы можете оказаться первым, кто столкнется с какой-либо ошибкой. В этом случае вы можете создать <noindex><a href="http://bugs.gentoo.org" rel="nofollow" target="_blank" class="external">отчет об ошибке</a></noindex>, чтобы разработчики узнали о ней.</p>


	<p>Однако будьте готовы к тому, что могут возникнуть проблемы со стабильностью, неудовлетворительной поддержкой пакетов (например неправильные/отсутствующие зависимости), слишком частыми обновлениями (а в результате — частыми сборками) или невозможностью собрать пакет. Если вы не знаете, как работает система и как разрешать возникающие проблемы, мы рекомендуем не отходить от стабильной и оттестированной ветви.</p>


	<p>К примеру, для выбора тестовой ветви на архитектуре x86, отредактируйте <a href="/etc/make.conf.html" class="wiki-page">/etc/make.conf</a> и укажите в нем:</p>


	<pre><code>ACCEPT_KEYWORDS="~x86"</code></pre>


	<p>Если вы запустите обновление системы, то увидите, что многие пакеты нуждаются в обновлении. Обратите внимание, что после перехода на тестовую ветвь и обновления системы, как правило, нет простого пути назад к стабильной официальной ветви (конечно, кроме использования резервной копии).</p>


	<h2 id="Одновременное-использование-стабильной-и-тестовой-ветвей">Одновременное использование стабильной и тестовой ветвей<a href="#Одновременное-использование-стабильной-и-тестовой-ветвей" class="wiki-anchor">&para;</a></h2>


	<h3 id="Местоположение-packagekeywords">Местоположение package.keywords<a href="#Местоположение-packagekeywords" class="wiki-anchor">&para;</a></h3>


	<p>Вы можете указать, чтобы Portage использовала тестовую ветвь только для определенных пакетов, а для остальной системы — стабильную ветвь. Для этого добавьте категорию и имя пакета, для которого вы желаете использовать тестовую ветвь. Создайте файл с любым именем в директории <code>/etc/portage/package.keywords/</code> или отредактируйте <code>/etc/portage/package.keywords/custom</code>. Например, для использования тестовой ветви для <span class="bluecode" >gnumeric</span>:</p>


	<pre><code>app-office/gnumeric ~x86</code></pre>


	<h3 id="Тестирование-определенных-версий">Тестирование определенных версий<a href="#Тестирование-определенных-версий" class="wiki-anchor">&para;</a></h3>


	<p>Если вы желаете использовать конкретную версию ПО из тестовой ветви, но не хотите, чтобы Portage использовала тестовую ветвь для последующих версий этого ПО, можно указать в местоположении <code>package.keywords</code> номер необходимой версии. В этом случае вы обязаны использовать оператор =. Также можно указать диапазон версий, используя операторы <=, <, > или >=.</p>


	<p>В любом случае, добавляя информацию о версии, вы должны использовать один из этих операторов. Если вы не указываете версию, эти операторы использовать нельзя.</p>


	<p>В следующем примере мы просим Portage разрешить установку gnumeric-1.2.13:</p>


	<pre><code>=app-office/gnumeric-1.2.13 ~x86</code></pre>


	<h2 id="Использование-заблокированных-пакетов">Использование заблокированных пакетов<a href="#Использование-заблокированных-пакетов" class="wiki-anchor">&para;</a></h2>


	<h3 id="Расположение-packageunmask">Расположение package.unmask<a href="#Расположение-packageunmask" class="wiki-anchor">&para;</a></h3>


	<p>Если использование пакета было заблокировано, но вы желаете его использовать несмотря на причины блокировки, добавьте для него точно такую же строку, создав файл внутри каталога <code>/etc/portage/package.unmask</code>.</p>


	<p>Например, если =net-mail/hotwayd-0.8 заблокирован, то разблокировать его можно, прописав в package.unmask точно такую же строчку:</p>


	<pre><code>=net-mail/hotwayd-0.8</code></pre>


	<h3 id="Местоположение-packagemask">Местоположение package.mask<a href="#Местоположение-packagemask" class="wiki-anchor">&para;</a></h3>


	<p>Если вы не хотите, чтобы Portage использовала какое-то конкретное ПО или конкретные версии ПО, вы можете его самостоятельно заблокировать, добавив соответствующую запись, создав файл внутри каталога <code>/etc/portage/package.mask</code>.</p>


	<p>Если, к примеру, вы не хотите, чтобы Portage устанавливала исходные коды ядра новее, чем <span class="bluecode" >calculate-sources-2.6.36.3</span>, добавьте такую строку в местоположение package.mask:</p>


	<pre><code>&gt;sys-kernel/calculate-sources-2.6.36.3</code></pre>
</body>
</html>
