<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>calculate-console-gui</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style>
body { font:80% Verdana,Tahoma,Arial,sans-serif; }
h1, h2, h3, h4 {  font-family: "Trebuchet MS",Georgia,"Times New Roman",serif; }
ul.toc { padding: 4px; margin-left: 0; }
ul.toc li { list-style-type:none; }
ul.toc li.heading2 { margin-left: 1em; }
ul.toc li.heading3 { margin-left: 2em; }
a.wiki-anchor { display: none; margin-left: 6px; text-decoration: none; }
a.wiki-anchor:hover { color: #aaa !important; text-decoration: none; }
h1:hover a.wiki-anchor, h2:hover a.wiki-anchor, h3:hover a.wiki-anchor { display: inline; color: #ddd; }
pre {font-size:133% }
</style>
</head>
<body>
<h1 id="Графический-клиент-утилит-Calculate">Графический клиент утилит Calculate<a href="#Графический-клиент-утилит-Calculate" class="wiki-anchor">&para;</a></h1>


	<ul class="toc"><li class="heading1"><a href="#Графический-клиент-утилит-Calculate">Графический клиент утилит Calculate</a></li>
<li class="heading2"><a href="#Введение">Введение</a></li>
<li class="heading2"><a href="#Создание-сертификата">Создание сертификата</a></li>
<li class="heading2"><a href="#Режимы-запуска">Режимы запуска</a></li>
<li class="heading2"><a href="#Соединение-и-работа-с-сервером-утилит">Соединение и работа с сервером утилит</a></li>
<li class="heading2"><a href="#Панель-меню">Панель меню</a></li>
<li class="heading3"><a href="#Возврат-в-Главное-меню">Возврат в Главное меню</a></li>
<li class="heading3"><a href="#Запущенные-процессы">Запущенные процессы</a></li>
<li class="heading3"><a href="#Информация-о-сессии">Информация о сессии</a></li>
<li class="heading3"><a href="#Настройка-программы">Настройка программы</a></li>
<li class="heading3"><a href="#Помощь">Помощь</a></li>
<li class="heading2"><a href="#Выполнение-методов-на-сервере-утилит">Выполнение методов на сервере утилит</a></li>
<li class="heading2"><a href="#Безопасность-и-разграничение-прав">Безопасность и разграничение прав</a></li>
<li class="heading3"><a href="#Запросы">Запросы</a></li>
<li class="heading3"><a href="#Сертификаты">Сертификаты</a></li>
<li class="heading3"><a href="#Права-групп">Права групп</a></li>
</ul>


	<h2 id="Введение">Введение<a href="#Введение" class="wiki-anchor">&para;</a></h2>


	<p>Клиент утилит Calculate служит для сетевого доступа по протоколу <noindex><a href="http://ru.wikipedia.org/wiki/HTTPS" rel="nofollow" target="_blank" class="external">https</a></noindex> к функциям сервера утилит Calculate 3. Установить клиент можно при помощи пакета <code>sys-apps/calculate-console-gui</code>.</p>


	<p>Для запуска клиента выполните команду:</p>


	<pre><code>cl-console-gui</code></pre>


	<p><div style="float:center;text-align:center"><img src="/attachments/download/2300" title="Главное окно cl-console-gui" alt="Главное окно cl-console-gui" /></div></p>


	<p style="text-align:center;">Рис. 1 Внешний вид окна <code>cl-console-gui</code></p>


	<h2 id="Создание-сертификата">Создание сертификата<a href="#Создание-сертификата" class="wiki-anchor">&para;</a></h2>


	<p>Для работы с сервером утилит необходим подписанный им сертификат. Для генерации запроса на подписание сертификата (далее запрос) и получения сертификата от сервера утилит используйте пункт <strong>"Сертификаты"</strong> в меню.</p>


	<p><div style="float:center;text-align:center"><img src="/attachments/download/2305" title="Создание запроса и получение сертификата" alt="Создание запроса и получение сертификата" /></div></p>


	<p style="text-align:center;">Рис. 2 Запрос на подпись сертификата</p>


	<p>В поле <em>Хост</em> введите адрес хоста сервера утилит, в поле <em>Порт</em> номер порта, который прослушивает сервер (по умолчанию 8888). Используйте кнопку <strong>"Отправить запрос"</strong> для создания и отправления запроса на сервер утилит и кнопку <strong>"Получить сертификат"</strong> для получения подписанного сертификата с сервера утилит.</p>


	<p>Для создания запроса и секретного ключа необходимо ввести некоторые данные в окне <strong>"Создание запроса на подпись сертификата"</strong>.</p>


	<p><div style="float:center;text-align:center"><img src="/attachments/download/2298" title="Создание запроса на подпись сертификата" alt="Создание запроса на подпись сертификата" /></div></p>


	<p style="text-align:center;">Рис. 3 Создания запроса на подпись сертификата</p>


	<p>Большая часть данных, кроме названия организации, города и пароля, будет заполнена автоматически. Не меняйте автоматически подставленные значения, если не уверены, что значения верны. Используйте поле <strong>"Пароль"</strong>, если необходимо дополнительное шифрование закрытого ключа. Введённый пароль будет запрашиваться для установки соединения с сервером утилит.</p>


	<p>После создания, запрос автоматически отправится на сервер утилит и появится окно с номером запроса.</p>


	<p><div style="float:center;text-align:center"><img src="/attachments/download/2306" title="Номер запроса" alt="Номер запроса" /></div></p>


	<p style="text-align:center;">Рис. 4 Информация о номере запроса</p>


	<p>Подписать запрос можно на сервере утилит через клиента или с помощью команды:<br /><pre>
cl-core --sign-client n
</pre>Где n - номер запроса.</p>


	<p>После подписания сертификата на сервере, его необходимо забрать нажав на кнопке <strong>"Получить сертификат"</strong> в окне сертификаты. Если запрос ещё не подписан или отвергнут, то появится соответствующее сообщение.</p>


	<h2 id="Режимы-запуска">Режимы запуска<a href="#Режимы-запуска" class="wiki-anchor">&para;</a></h2>


Графический клиент может быть запущен в одном из двух режимов:
	<ul>
	<li>запуск в обычном режиме командой<br /><pre>
cl-console-gui
</pre></li>
		<li>запуск отдельного метода с помощью ключа --method<br /><pre>
cl-console-gui --method methodname
</pre></li>
	</ul>


	<p>Пример запуска установки системы:<br /><pre>
cl-console-gui --method install
</pre></p>


	<h2 id="Соединение-и-работа-с-сервером-утилит">Соединение и работа с сервером утилит<a href="#Соединение-и-работа-с-сервером-утилит" class="wiki-anchor">&para;</a></h2>


	<p>Для соединения с сервером утилит используйте пункт <strong>"Соединиться"</strong> в меню.</p>


	<p><div style="float:center;text-align:center"><img src="/attachments/download/2297" title="Соединение" alt="Соединение" /></div></p>


	<p style="text-align:center;">Рис. 5 Установка соединения с сервером утилит</p>


	<p>В поле <em>Хост</em> введите адрес хоста сервера утилит, в поле <em>Порт</em> номер порта, который прослушивает сервер утилит, в поле <em>Пароль</em> введите пароль, если он используется для дополнительного шифрования закрытого ключа. Затем нажмите на кнопку <em>Соединиться</em>.</p>


	<p>В случае успешного соединения, в главном окне появятся доступные на данном сервере утилит методы (см. раздел <em>"Выполнение методов на сервере утилит"</em>).</p>


	<h2 id="Панель-меню">Панель меню<a href="#Панель-меню" class="wiki-anchor">&para;</a></h2>


	<p>После установления соединения с сервером утилит верхнее меню приобретает вид, показанный на предыдущем изображении и состоит из кнопок: <em>"Назад"</em> (кроме главного меню), <em>"Процессы"</em>, <em>"Сессия"</em>, <em>"Отсоединиться"</em>, <em>"Настройки"</em> и <em>"Помощь"</em>.</p>


	<h3 id="Возврат-в-Главное-меню">Возврат в Главное меню<a href="#Возврат-в-Главное-меню" class="wiki-anchor">&para;</a></h3>


	<p>Для возврата в главное меню служит кнопка <strong>"Назад"</strong> в главном меню. При отображении главного меню кнопка не отображается.</p>


	<h3 id="Запущенные-процессы">Запущенные процессы<a href="#Запущенные-процессы" class="wiki-anchor">&para;</a></h3>


	<p>Кнопка <strong>"Процессы"</strong> в панели меню покажет информацию о запущенных процессах. К работающему процессу можно подключиться, прервать его выполнение или просмотреть результат работы.</p>


	<p><div style="float:center;text-align:center"><img src="/attachments/download/2339" title="Просмотр запущенных процессов" alt="Просмотр запущенных процессов" /></div></p>


	<p style="text-align:center;">Рис. 6 Просмотр информации о запущенных процессах</p>


	<h3 id="Информация-о-сессии">Информация о сессии<a href="#Информация-о-сессии" class="wiki-anchor">&para;</a></h3>


	<p>Кнопка <strong>"Сессия"</strong> в панели меню отобразит окно с информацией о текущей сессии с возможностью очистить на сервере кэш процессов, принадлежащих данной сессии.</p>


	<p><div style="float:center;text-align:center"><img src="/attachments/download/2308" title="Информация о сессии" alt="Информация о сессии" /></div></p>


	<p style="text-align:center;">Рис. 7 Информация о текущей сессии</p>


Кнопка <strong>"Отсоединиться"</strong> в панели меню отобразит диалоговое окно закрытия сессии и тремя действиями:
	<ul>
	<li>"Да" - отсоединиться и закрыть сессию.</li>
		<li>"Нет" - Отсоединиться, но не закрывать сессию.</li>
		<li>"Отмена" - не отсоединяться.</li>
	</ul>


	<p><div style="float:center;text-align:center"><img src="/attachments/download/2307" title="Закрытие сессии" alt="Закрытие сессии" /></div></p>


	<p style="text-align:center;">Рис. 8 Закрытие сессии</p>


	<h3 id="Настройка-программы">Настройка программы<a href="#Настройка-программы" class="wiki-anchor">&para;</a></h3>


	<p>Кнопка <strong>"Настройки"</strong> в панели меню служит для вызова окна настроек параметров Calculate Console и состоит из вкладок <em>"Настройки интерфейса"</em> и <em>"Прочие настройки"</em>.</p>


Вкладка "Настройки интерфейса" включает поля:
	<ul>
	<li><em>"Расширенный просмотр"</em> - устанавливает режим просмотра результатов работы процесса: расширенный или сокращённый.</li>
		<li><em>"Высота изображений"</em> - устанавливает фиксированную высоту изображений (0 - убрать изображения).</li>
		<li><em>"Количество строк в таблице"</em> - устанавливает максимальное количество строк в таблицах, находящихся в результатах работы процесса и отображающих списки (например, список запросов на подпись сертификата).</li>
	</ul>


	<p><div style="float:center;text-align:center"><img src="/attachments/download/2312" title="Настройки (1 вкладка)" alt="Настройки (1 вкладка)" /></div></p>


	<p style="text-align:center;">Рис. 9 Настройка интерфейса</p>


Вкладка "Прочие настройки" включает поля:
	<ul>
	<li><em>"Выбор языка"</em> - устанавливает язык интерфейса.</li>
		<li><em>"Директория с сертификатами"</em> - устанавливает директорию, где находятся сертификаты клиента (при хранении их не в стандартной директории или на внешнем носителе).</li>
	</ul>


	<p><div style="float:center;text-align:center"><img src="/attachments/download/2313" title="Настройки (2 вкладка)" alt="Настройки (2 вкладка)" /></div></p>


	<p style="text-align:center;">Рис. 10 Прочие настройки программы</p>


	<h3 id="Помощь">Помощь<a href="#Помощь" class="wiki-anchor">&para;</a></h3>


Кнопка <strong>"Помощь"</strong> в панели меню отобразит подменю из пунктов:
	<ul>
	<li><em>"О программе"</em> - выведет окно с информацией о Calculate Console</li>
		<li><em>"Справка"</em> - откроет веб-страницу с этим руководством.</li>
		<li><em>"Сообщить об ошибке"</em> - отобразит окно для отправки сообщения об ошибке разработчикам:</li>
	</ul>


	<p><div style="float:center;text-align:center"><img src="/attachments/download/2296" title="Сообщение об ошибке" alt="Сообщение об ошибке" /></div></p>


	<p style="text-align:center;">Рис. 11 Окно отправки сообщения об ошибке</p>


	<h2 id="Выполнение-методов-на-сервере-утилит">Выполнение методов на сервере утилит<a href="#Выполнение-методов-на-сервере-утилит" class="wiki-anchor">&para;</a></h2>


	<p>После соединения с сервером утилит в Главном окне появятся доступные для данного сертификата методы:</p>


	<p><div style="float:center;text-align:center"><img src="/attachments/download/2301" title="Доступные действия на сервере утилит" alt="Доступные действия на сервере утилит" /></div></p>


	<p style="text-align:center;">Рис. 12 Главное окно с доступными методами</p>


	<p>Все методы разделены по категориям. При открытии метода откроется окно с необходимыми данными. Методы могут состоять из одного шага:</p>


	<p><div style="float:center;text-align:center"><img src="/attachments/download/2302" title="Действие с одним шагом" alt="Действие с одним шагом" /></div></p>


	<p style="text-align:center;">Рис. 13 Метод настройки видеокарты</p>


	<p>Или из нескольких шагов:</p>


	<p><div style="float:center;text-align:center"><img src="/attachments/download/2303" title="Действие с несколькими шагами" alt="Действие с несколькими шагами" /></div></p>


	<p style="text-align:center;">Рис. 14 Настройка видеокарты, как один из шагов метода установки системы</p>


	<p>По шагам можно перемещаться, используя кнопки "Назад" и "Далее" или выбрав нужный шаг в списке слева. Начать выполнение метода можно только из последнего шага.</p>


	<p>При выполнении метода откроется окно с результатами работы процесса. Во время выполнения, процесс можно прервать, нажав на кнопку "Прервать процесс".</p>


	<p>По завершении работы процесса можно вернуться назад с помощью кнопки "Назад" в верхнем меню или закрыть процесс, нажав на кнопку "Закрыть". В этом случае данные о его работе будут удалены на сервере утилит и не будут отображаться в окне "Просмотр информации о запущенных процессах".</p>


	<h2 id="Безопасность-и-разграничение-прав">Безопасность и разграничение прав<a href="#Безопасность-и-разграничение-прав" class="wiki-anchor">&para;</a></h2>


	<p>Как уже упоминалось, для взаимодействия графического клиента с сервером утилит Calculate используется протокол "https", который позволяет зашифровывать передаваемые данные, используя сертификаты и ключи. Процесс получения сертификата описан ранее в разделе <em>"Создание сертификата"</em>. В данном разделе речь пойдёт о подписании запросов и разграничении прав доступа по сертификатам.</p>


	<h3 id="Запросы">Запросы<a href="#Запросы" class="wiki-anchor">&para;</a></h3>


	<p>Запрос на подпись сертификата создаётся на стороне клиента после создания открытого и секретного ключей, и передаётся серверу утилит для подписания сертификата.</p>


	<p>В графическом клиенте для работы с запросами на сервере утилит используется метод <strong>"Просмотр запросов"</strong> в категории утилиты.</p>


	<p><div style="float:center;text-align:center"><img src="/attachments/download/2310" title="Просмотр запросов" alt="Просмотр запросов" /></div></p>


	<p style="text-align:center;">Рис. 15 Просмотр запросов</p>


	<p>Для выбора запроса необходимо нажать на строку таблицы, после чего откроется окно с информацией о запросе, где можно изменить номер запроса (при этом данные о запросе не обновляются) и группу будущего сертификата.<br />Выбранный запрос можно подписать <em>"Подтвердить"</em> или отказать в подписании <em>"Удалить"</em>. Подписанный запрос, сертификат которого не забран клиентом, будет отображаться в таблице <em>"Просмотр запросов"</em> с названием группы в столбце <em>"Группа"</em>.</p>


	<p><div style="float:center;text-align:center"><img src="/attachments/download/2299" title="Подробности запроса" alt="Подробности запроса" /></div></p>


	<p style="text-align:center;">Рис. 16 Просмотр запросов</p>


	<h3 id="Сертификаты">Сертификаты<a href="#Сертификаты" class="wiki-anchor">&para;</a></h3>


	<p>Сертификат подтверждает соответствие между открытым ключом и информацией, идентифицирующей владельца ключа. Кроме того, в утилитах Calculate сертификаты используются для разграничения прав доступа с помощью указания в них группы прав.</p>


	<p>При генерации сертификата для него устанавливается группа прав. Права записывается в одно из полей сертификата и не подлежат изменению.</p>


	<h3 id="Права-групп">Права групп<a href="#Права-групп" class="wiki-anchor">&para;</a></h3>


	<p>Права групп служат для разграничения прав на сервере утилит и указываются в сертификате клиента. Каждой группе соответствует список прав, к которым данная группа имеет доступ.</p>


	<p>Права для групп сертификатов по умолчанию хранятся в файле <code>/var/calculate/server/conf/group_right.conf</code> в следующем виде: <code>group right1[, right2[,right3...]]</code>, например<br /><pre>
manager install, get-sessions, request
user get-sessions,request,view_cert
</pre></p>


	<p>Для изменения прав конкретного сертификата используется файл <code>/var/calculate/server/conf/right.conf</code>, куда необходимо вписать права и номера сертификатов.</p>


	<p>Пример:<br /><pre>
install 1 2 -3
</pre></p>


	<p>Для сертификатов с номерами <code>1</code> и <code>2</code> добавить право на метод "install" и удалить его для сертификата с номером <code>3</code>.<br />Права для конкретного сертификата имеют приоритет перед правами для группы сертификата.</p>


	<p>Для управления правами групп на сервере утилит в клиенте используется метод <strong>"Просмотр групп"</strong> в категории утилиты.</p>


	<p><div style="float:center;text-align:center"><img src="/attachments/download/2314" title="Просмотр групп" alt="Просмотр групп" /></div></p>


	<p style="text-align:center;">Рис. 17 Просмотр групп</p>


	<p>Для добавления новой группы нажмите на кнопку "+" (плюс). В открытом действии <strong>"Добавление группы"</strong> введите имя создаваемой группы в поле <em>"Имя группы"</em> и выберите права для группы в поле <em>"Права группы"</em>.</p>


	<p>Для выбора группы необходимо нажать на строку таблицы, после чего откроется <strong>"Подробности группы"</strong>, где можно изменить права либо удалить группу.</p>
</body>
</html>
