<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>configuration of ftp server</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style>
body { font:80% Verdana,Tahoma,Arial,sans-serif; }
h1, h2, h3, h4 {  font-family: "Trebuchet MS",Georgia,"Times New Roman",serif; }
ul.toc { padding: 4px; margin-left: 0; }
ul.toc li { list-style-type:none; }
ul.toc li.heading2 { margin-left: 1em; }
ul.toc li.heading3 { margin-left: 2em; }
a.wiki-anchor { display: none; margin-left: 6px; text-decoration: none; }
a.wiki-anchor:hover { color: #aaa !important; text-decoration: none; }
h1:hover a.wiki-anchor, h2:hover a.wiki-anchor, h3:hover a.wiki-anchor { display: inline; color: #ddd; }
pre {font-size:133% }
</style>
</head>
<body>
<h1 id="Настройка-FTP-сервера">Настройка FTP сервера<a href="#Настройка-FTP-сервера" class="wiki-anchor">&para;</a></h1>


	<p>FTP (англ. File Transfer Protocol — протокол передачи файлов) — протокол, предназначенный для передачи файлов в компьютерных сетях. FTP позволяет подключаться к серверам FTP, просматривать содержимое каталогов и загружать файлы с сервера или на сервер.</p>


	<p>Настройка FTP сервера производится в несколько этапов:</p>


	<h2 id="Установка-FTP-сервиса-в-систему">Установка FTP сервиса в систему<a href="#Установка-FTP-сервиса-в-систему" class="wiki-anchor">&para;</a></h2>


	<p>Настройка сервиса ftp требует, чтобы в системе были установлены сервисы ldap и unix, поэтому если они еще не были установлены устанавливаем их командами:<br /><pre>
cl-setup ldap
cl-setup unix
</pre></p>


	<p>Установка ftp сервиса производится командой:<br /><pre>
cl-setup ftp
</pre></p>


	<p>После чего ftp становится доступен для пользователя <em>anonymous</em>. На сервере также автоматически в ftp директории создадутся папки tmp и pub.</p>


	<p>Для подключения к ftp откройте любой браузер, поддерживающий этот протокол, и введите в адрес странцы <code>ftp://вашСервер</code>.</p>


	<h2 id="Учетные-записи">Учетные записи<a href="#Учетные-записи" class="wiki-anchor">&para;</a></h2>


	<p>Учетные записи используются для авторизованного доступа к FTP серверу. Для каждой из них может быть настроена домашняя папка, при использовании совместно с unix сервисом, разграничены права.</p>


	<h3 id="Управление-учетными-записями">Управление учетными записями<a href="#Управление-учетными-записями" class="wiki-anchor">&para;</a></h3>


	<h4>Добавление учетной записи</h4>


Для добавления учетной записи сервиса ftp используется команда <em>cl-useradd</em>:
	<ul>
	<li>Cоздать учетную запись user1 и задать пароль<br /><pre>
cl-useradd -p user1 ftp
</pre></li>
	</ul>


	<ul>
	<li>Создать учетную запись user1 с домашней директорией, задать пароль. Домашняя директория по умолчанию помещается в pub/users/&lt;имя_учетной_записи&gt; домашней директории сервиса ftp. К этой директории имеет доступ только этот пользователь.<br /><pre>
cl-useradd -p -m user1 ftp
</pre></li>
	</ul>


	<ul>
	<li>Создать учетную запись user1 с указанной домашней директорией, задать пароль. Домашняя директория в этом случае будет находится по указанному пути относительно корня домашней директории сервиса ftp.<br /><pre>
cl-useradd -p -m -d pub/user1 user1 ftp
</pre></li>
	</ul>


	<h4>Смена пароля учетной записи</h4>


	<p>Смена пароля учетной записи сервиса ftp производится командой cl-passwd:<br /><pre>
cl-passwd user1 ftp
</pre></p>


	<h4>Удаление учетной записи</h4>


	<p>Удаление учетной записи из сервиса ftp производится командой cl-userdel, при этом удаляется пользовательская домашняя директория.<br /><pre>
cl-userdel user1 ftp
</pre></p>


	<p>P.S. Т.к. при создании учетной записи сервиса ftp, автоматически создается учетная запись сервиса unix, то при удалении учетной записи сервиса ftp, учетная запись unix остается.</p>


	<h2 id="Управление-правами-доступа-к-директориям">Управление правами доступа к директориям<a href="#Управление-правами-доступа-к-директориям" class="wiki-anchor">&para;</a></h2>


	<p><em>Права доступа</em> - это атрибуты файла или директории, которые указывают серверу, кто и что может делать с соответствующим файлом или директорией.<br />Файлы имеют двух владельцев: пользователя (user owner) и группу пользователей (group owner). Для каждого файла есть индивидуальные права доступа, которые разбиты на три группы: Доступ для пользователя-владельца файла (owner). Доступ для группы-владельца файла (group). Доступ для остальных пользователей (others).</p>


	<p>Для каждой категории устанавливаются три вида доступа: (x) - право на запуск файла/право входа в директорию, (r) - право на чтение файла/директории, (w) - право на изменение (редактирование) файла, удаление/создание файлов в директории.</p>


	<p>Для определения прав доступа к директориям сервис ftp взаимодействует с unix сервисом: каждой учетной записи ftp соответствует одноименная учетная запись unix. Таким образом, пользователь, входя под своей учетной записей на ftp сервер, получает определенный доступ к файлу в зависимости от того, является ли он пользователем-владельцем файла, и входит ли в группу-владельца файла. Если пользователь не является владельцем и не входит в группу-владельца, то доступ определяется по правам <em>others</em>. В случае анонимного доступа к ftp, права также определяются по <em>others</em>.</p>


	<h3 id="Установка-прав-доступа">Установка прав доступа<a href="#Установка-прав-доступа" class="wiki-anchor">&para;</a></h3>


	<p>Установка прав осуществляется на сервере командной chmod<br /><pre>
# установить права user=все group=чтение/запись others=чтение
chmod u=rwx,g=rw,o=r file

# установить группу-владельца pubwriter
chgrp pubwriter pub
# установить разрешение писать в директорию pub для группы
chmod g+w pub
</pre></p>


	<h3 id="Управление-unix-группами">Управление unix группами<a href="#Управление-unix-группами" class="wiki-anchor">&para;</a></h3>


	<p>Так как ftp сервис тесно связан с unix сервисом, то управление группами, в которые входит пользователь осуществляется через unix сервис.</p>


	<h4>Добавление группы</h4>


	<p>Добавление группы осуществляется командой <em>cl-groupadd</em>:<br /><pre>
# добавить группу pubwriter
cl-groupadd pubwriter unix
</pre></p>


	<h4>Удаление группы</h4>


	<p>Удаление группы осуществляется командой <em>cl-groupdel</em>:<br /><pre>
# удалить группу test
cl-groupdel test unix
</pre></p>


	<h4>Добавление/удаление учетных записей в группу</h4>


Добавление и удаление учетных записей производится двумя способами:
	<ul>
	<li>с использованием команды <em>cl-usermod</em>:<br /><pre>
# добавить пользователя guest в группы pubwriter
cl-usermod -a pubwriter guest unix

# заменить пользователю guest группы на guest
cl-usermod -G guest guest unix
</pre></li>
	</ul>


	<ul>
	<li>с использованием команды <em>cl-groupmod</em>:<br /><pre>
# удалить пользователей guest1 и guest2 из группы pubwriter
cl-groupmod -d guest1,guest2 pubwriter unix

# добавить пользователей guest1,guest2 в группу pubwriter
cl-groupmod -a guest1,guest2 pubwriter unix
</pre></li>
	</ul>
</body>
</html>
