# Настройка сети[¶](#Настройка-сети)

Настройки сети находятся в файле `/etc/conf.d/net`.

## Начальная настройка[¶](#Начальная-настройка)

Перед тем, как настраивать конфигурационный файл, нужно убедиться, что в директории `/etc/init.d/` присутствует символическая ссылка на `/etc/init.d/net.lo` с именем конфигурируемого интерфейса (в примерах упоминается сетевой интерфейс _eth0_.

Если настройки сети получаем по _DHCP_, то конфигурационный файл будет иметь вид:  

    
    config_eth0="dhcp" 
    

Если используем статический адрес, конфигурационный файл будет иметь вид:  

    
    #для интерфейса eth0 прописываем ip-адрес из 24-й сети
    config_eth0="192.168.0.7/24" 
    #указываем шлюз который будет использоваться в сети по умолчанию
    routes_eth0="default via 192.168.0.1" 
    

Если настройки не прописаны в конфигурационном файле, то будет предпринята попытка получить настройки сети по _DHCP_.

Также при запуске системы можно обнаружить такого рода сообщение:

    
    "Bringing up interface eth0
    Starting ifplugd on eth0
    Backgrounding.....
    WARNING: net.eth0 has started, but is inactive" 
    

Не пугайтесь. Сеть продолжает подниматься, просто не тормозит загрузку системы. В некоторых случаях это удобно, а в некоторых нет. Те, кому подобная ситуация не нравится, могут дописать в `/etc/conf.d/net` такую строку:  

    
    modules_eth0="!plug" 
    

Но помните, при следующем запуске придется дожидаться окончания загрузки сети.

## Расширенные настройки сети[¶](#Расширенные-настройки-сети)

Иногда при наличии одной сетевой карты существует необходимость работать в нескольких сетях. Это можно реализовать, присвоив несколько адресов одному сетевому интерфейсу. Например:  

    
    #основные настройки получаем по DHCP, а IP присваиваем статически
    config_eth0="dhcp" "10.0.0.17/24" 
    #говорим, что пакеты для сети 10.0.0.0/24 пересылать не через шлюз,
    #полученный по DHCP, а через 10.0.0.1
    routes_eth0="10.0.0.0/24 via 10.0.0.1" 
    

Для получения основных настроек сети не обязательно использовать _DHCP_ - они могут быть заданы и статически:  

    
    #прописываем несколько статических адресов
    config_eth0="192.168.0.17/24" "10.0.0.17/24" 
    #указываем основной шлюз и дополнительный
    routes_eth0="default via 192.168.0.1" "10.0.0.0/24 via 10.0.0.1" 
    

_MTU_ для интерфейса прописываем таким способом (актуально для _DSL_-модемов, в основном используют значение _1000_):  

    
    mtu_eth0="1500" 
    

Настройки _DNS_ для интерфейса:  

    
    #указываем используемый в сети домен
    dns_domain_eth0="your.domain" 
    # указываем список DNS серверов в порядке их обхода
    dns_servers_eth0="192.168.0.2 192.168.0.3" 
    

Если данные настройки отсутствуют, то настройки DNS берутся из `/etc/resolv.conf`.

Настройка синхронизации с сервером времени (_NTP_):  

    
    #перечислям список серверов для синхронизации
    ntp_servers_eth0="192.168.0.2 192.168.0.3" 
    

Изменение _MAC-адреса_:  

    
    # указываем нужный MAC-адрес
    mac_eth0="01:23:45:67:89:AB"