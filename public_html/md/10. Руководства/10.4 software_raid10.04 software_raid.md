# Программный Raid[¶](#Программный-Raid)

Руководство по созданию программного Raid5 массива.

## Создание raid5 массива[¶](#Создание-raid5-массива)

    
    mdadm --create /dev/md0 --level=5 --raid-devices=3 /dev/sdb1 /dev/sdd1 /dev/sde1
    

## Добавление устройства[¶](#Добавление-устройства)

    
    mdadm /dev/md0 -a /dev/sdc1
    

## Подключение добавленного устройства к raid5 массиву[¶](#Подключение-добавленного-устройства-к-raid5-массиву)

    
    mdadm -G /dev/md0 -n4
    

## Просмотр состояния raid5 массива[¶](#Просмотр-состояния-raid5-массива)

    
    mdadm -Q --detail /dev/md0
    

## Форматирование raid5 массива (XFS)[¶](#Форматирование-raid5-массива-XFS)

    
    mkfs.xfs /dev/md0
    

## Монтирование raid5 массива[¶](#Монтирование-raid5-массива)

    
    mount /dev/md0 /mnt/floppy
    

## Расширение файловой системы XFS при увеличении размера массива[¶](#Расширение-файловой-системы-XFS-при-увеличении-размера-массива)

    
    xfs_growfs /dev/md0
    

## Остановка raid5 массива[¶](#Остановка-raid5-массива)

    
    mdadm -S /dev/md0
    

## Поиск raid5 дисков и их подключение после остановки[¶](#Поиск-raid5-дисков-и-их-подключение-после-остановки)

    
    mdadm --assemble --scan
    

## Включение raid5 массива при загрузке системы[¶](#Включение-raid5-массива-при-загрузке-системы)

### Генерация mdadm.conf[¶](#Генерация-mdadmconf)

Должно существовать устройство `/dev/md0`.  

    
    mdadm --detail --scan > /etc/mdadm.conf
    

### Включения модуля в автозагрузку[¶](#Включения-модуля-в-автозагрузку)

Добавляем в `/etc/conf.d/modules`:  

    
    modules="raid5" 
    

### Автозапуск mdraid[¶](#Автозапуск-mdraid)

    
    rc-update add mdraid boot