# Настройка прав доступа ACL[¶](#Настройка-прав-доступа-ACL)

Для создания прав доступа к файлам Samba ресурса сервера используйте _ACL_ (_Access Control List_ --- список контроля доступа). При помощи ACL вы можете установить доступ к файлам определенным группам, либо конечным пользователям.

Стандартные команды работы с ACL - _setfacl_ и _getfacl_ - подробно описаны в руководстве, поэтому здесь мы ограничимся примерами.

После [настройки Samba сервера](настройки Samba сервера.html), создаётся путь для общей точки монтирования _/var/calculate/server-data/samba/share_.

Внимание. Убедитесь, что файловая система диска, содержащего указанную директорию, поддерживает ACL. _Не забудьте в опции монтирования файловой системы указать параметр "acl" (для xfs не требуется)._

## Новый ресурс[¶](#Новый-ресурс)

Для примера допустим у вас в системе есть две группы `manager` и `logist`, а также два пользователя `iivanov` и `apetrov`.

Создадим директорию `Менеджер` для доступа на чтение и запись пользователям, входящим в группу manager.  

    
    mkdir -m 700 Менеджер
    setfacl -m d:g:manager:rwx,g:manager:rwx Менеджер
    

Первая команда создаст директорию с правами чтения выполнения и изменения содержимого для пользователя root. Второй командой мы установим те же права для пользователей группы manager.

Файлы и директории, создаваемые пользователями этой группы, либо root-ом, будут наследовать атрибуты доступа.

## Просмотр прав доступа[¶](#Просмотр-прав-доступа)

Права на доступ к директории, вы можете посмотреть из консоли, либо через файловый менеджер dolphin, с [Calculate Linux Desktop](Calculate Linux Desktop.html) (KDE версия).

Увидеть права доступа из консоли можно выполнив команду:

    getfacl Менеджер

Программа выведет следующий текст:  

    
    # file: \320\234\320\265\320\275\320\265\320\264\320\266\320\265\321\200/
    # owner: root
    # group: root
    user::rwx
    group::---
    group:manager:rwx
    mask::rwx
    other::---
    default:user::rwx
    default:group::---
    default:group:manager:rwx
    default:mask::rwx
    default:other::---
    

Для просмотра прав из dolphin, нажмите на файле или директории правой кнопкой мыши, выберите вкладку `Права`, далее нажмите на кнопку _Дополнительные права_. Растяните открывшееся окно, чтобы увидеть все атрибуты.

## Управление доступом[¶](#Управление-доступом)

Для управлением доступом используется команда _setfacl_.  
Для модификации или добавления правила используется параметр -m.

    -m user:[пользователь]:права[,user:пользователь:права]  
    -m group:[группа]:права[,group:группа:права]

Если _пользователь_ пропущен, то _права_ назначаются владельцу файла.  
Если _группа_ пропущена, то _права_ назначаются группе-владельцу файла.

### Пример[¶](#Пример)

Добавить право на чтение/запись файла `secretinfo` пользователям iivanov и apetrov:

    setfacl -m user:iivanov:rw,u:apetrov:rw secretinfo

Добавить право на чтение/выполнение файла `runit` группе