# Обзор структуры LDAP сервера[¶](#Обзор-структуры-LDAP-сервера)

## Введение[¶](#Введение)

Записи LDAP сервера состоят из одного или нескольких атрибутов и обладают уникальным именем (DN --- _Distinguished Name_). Уникальное имя может выглядеть, например, следующим образом: _"cn=Иван Петров,ou=Сотрудники,dc=example,dc=com"_.

Уникальное имя состоит из одного или нескольких _относительных уникальных имен_ (RDN --- _Relative Distinguished Name_), разделённых запятой. Относительное уникальное имя имеет вид _"ИмяАтрибута=значение"_. На одном уровне каталога не может существовать двух записей с одинаковыми относительными уникальными именами. В силу такой структуры уникального имени записи в каталоге можно легко представить в виде дерева, где записи будут ветвями, а в роли листьев будут выступать атрибуты данных записей. В качестве корня дерева (_корневой ветки_) выступает запись которой подчинены другие записи, а сама она никому не подчинена.

## Общее описание структуры LDAP Calculate сервера[¶](#Общее-описание-структуры-LDAP-Calculate-сервера)

Корневая ветка _"dc=calculate"_ содержит следующие записи ("ветки"):  

    
    cn=ldapadmin
    

  
содержит DN и пароль для подключения к LDAP серверу c полными правами.  

    
    cn=proxyuser
    

  
содержит DN и пароль подключения к LDAP серверу c правами только для чтения, так же недоступны будут такие поля как userPassword и т.д.  

    
    ou=Services
    

  
содержит в себе ветки сервисов, установленные посредством утилит _Calculate 2_.

Таким образом ветка _"ou=Services"_ содержит набор ветвей описания сервисов _ou=Unix, ou=Mail, ou=Samba, ou=Ftp_ и _ou=Jabber_. Каждая ветка сервиса является _DN_ и может хранить пароль подключения к LDAP с доступом к их данным и может содержать дочерние ветки: _"ou=Users"_ (учетные записи), _"ou=Groups"_ (группы), _"ou=Computers"_ (компьютеры).

## Просмотр структуры LDAP[¶](#Просмотр-структуры-LDAP)

Для просмотра структуры LDAP сервера вы можете воспользоваться любым LDAP браузером.

Для подключения к базе с полными правами требуется пароль администратора LDAP базы. Узнать его можно в файле _/etc/calculate/calculate.ldap_ на сервере. Файл разбит на области, названия которых соответствуют названиям сервисов. В каждой секции находится запись _DN_ и пароль для подключения. Учетная запись администратора находится в секции _\[admin\]_.

### Просмотр структуры LDAP на примере программы Luma[¶](#Просмотр-структуры-LDAP-на-примере-программы-Luma)

После запуска программы Luma откроется окно:

![](/attachments/download/134)
Создадим подключение к LDAP базе сервера с полным доступом, для этого

* Выбираем пункт меню _Settings-\>Edit Server List_ или нажимем _Ctrl+E_, после чего откроется окно для управления   
подключениями к LDAP серверам:

![](/attachments/download/132)

* нажимаем кнопку _Add_ и в появившееся поле для ввода вписываем произвольное название подключения, например _proxy@newserver_
* нажимаем на появившееся название в списке Server, и откроются ветки настройки подключения к LDAP серверу
* щелкаем ветку _Network options_ и в появившихся настройках справа вписываем _Hostname_ сервера
* переходим к ветке _Authentification_ и снимаем пометку Anonymous bind
* оставляем _Mechanism_ со значением _Simple_
* вписываем в _Bind as_ значение _DN_ - _"cn=ldapadmin,dc=calculate"_, а в _Password_ содержимое поля _PASS_, файла _/etc/calculate/calculate.ldap_, нажимаем ОК

Выбираем плагин _Browser_ и в открывшемся окне смотрим структуру LDAP сервера:

![](/attachments/download/133)