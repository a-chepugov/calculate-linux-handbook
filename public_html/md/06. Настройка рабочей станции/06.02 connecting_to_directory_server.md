# Подключение к серверу каталогов[¶](#Подключение-к-серверу-каталогов)

Наибольший интерес пакет _calculate-client_ представляет при наличии сервера директорий. В этом случае вы можете хранить все настройки централизованно. Для взаимодействия с сервером на последнем должен быть установлен пакет _calculate-server_. Вы можете воспользоваться сервером [Calculate Directory Server](Calculate Directory Server.html), в состав которого входит пакет _calculate-server_.

Сеанс пользователя в этом случае настраивается с учетом работающих на сервере приложений. Для доступа к настройкам рабочую станцию нужно ввести в домен.

_Мы применяем терминологию, похожую на Windows NT, т.к. во многом принцип действия схож. Вы можете подключать к серверу как Windows машины, так и Linux. Обе системы получают доступ к общим ресурсам сервера, сетевым службам, а также хранят на нем свои настройки - окружения рабочих столов пользователей._

**Для ввода в домен потребуется выполнить следующие действия:**

1. Выполните настройки _samba_ на сервере по [описанию](описанию.html).
2. Установите пароль пользователя _client_ на сервере, выполнив:  

    
    cl-passwd --smb client samba
    

3. Введите компьютер в домен. Для этого регистрируемся на клиентской машине как _root_ и выполняем:  

    
    cl-client HOST
    

  
Потребуется ввод пароля пользователя _client_. Вместо сетевого имени сервера (в примере HOST, проверьте доступность, выполнив _ping HOST_) можно указать его IP адрес.

Введенный пароль кэшируется на клиентской системе в файле `/var/calculate/calculate.env`:  

    
    [client]
    cl_remote_host = HOST
    cl_remote_pw = password
    

**При успешном входе в домен программа выполнит следующие действия:**

* Подмонтирует сетевой ресурс `/var/calculate/remote`.
* Подключит пользователей сервера директорий, настроив файлы `/etc/pam.d/system-auth`, `/etc/nsswitch.conf` и др.
* Подготовит `/home`, монтируя поверх локальную директорию `/var/calculate/client-home`, для исключения конфликтов с локальными пользователями.
* Пропишет себя в автозагрузку, чтобы при загрузке выполнять проверку доступности сервера и настройку системы.