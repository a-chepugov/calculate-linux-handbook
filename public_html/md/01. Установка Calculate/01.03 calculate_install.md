# Установка Calculate Linux на жёсткий диск[¶](#Установка-Calculate-Linux-на-жёсткий-диск)

* [Установка Calculate Linux на жёсткий диск](#Установка-Calculate-Linux-на-жёсткий-диск)
* [Графическая установка системы](#Графическая-установка-системы)
* [Язык и локаль](#Язык-и-локаль)
* [Выбор дистрибутива](#Выбор-дистрибутива)
* [Распределение места на диске](#Распределение-места-на-диске)
* [Точки монтирования](#Точки-монтирования)
* [Сетевые настройки](#Сетевые-настройки)
* [Пользователи](#Пользователи)
* [Видео](#Видео)
* [Начать установку](#Начать-установку)
* [Установка системы из консоли](#Установка-системы-из-консоли)
* [Помощь](#Помощь)

## Графическая установка системы[¶](#Графическая-установка-системы)
Для установки системы с помощью [графического клиента](графического клиента.html) утилит Calculate выполните одно из действий:

* запустите `cl-console-gui` и в категории **Установка** выберите пункт **Установка системы**;
* запустите `cl-console-gui --method install` для открытия отдельного окна с установкой системы.

Необходимые ярлыки запуска программы можно найти на рабочем столе LiveDVD или в меню.
**Установка Calculate Linux состоит из следующих шагов:**

1. Язык и локаль;
2. Выбор дистрибутива;
3. Распределение места на диске;
4. Точки монтирования;
5. Сетевые настройки;
6. Пользователи;
7. Настройка видео;
8. Установка на жёсткий диск.

Пользователь может перемещаться по шагам с помощью кнопок _Назад_ и _Далее_, а также выбрав нужный пункт в левом меню. Во втором случае, если пропущен обязательный шаг или где-то была допущена ошибка, то перед установкой пользователю будет предложено исправить ошибку.

### Язык и локаль[¶](#Язык-и-локаль)

Первым пунктом установки является выбор языка и часового пояса. Выберите необходимые параметры из выпадающих списков.

![Язык и локаль](/attachments/download/2398)

Рис. 1 Настройка языка и локали

### Выбор дистрибутива[¶](#Выбор-дистрибутива)

По умолчанию для установки будет использоваться дистрибутив, с которого был записан ваш DVD или USB-Flash. Программа установки сканирует директории `/var/calculate/linux` и `/var/calculate/remote/linux` и в случае нахождения там ISO образов с Calculate Linux, отобразит их в списке _Установочный образ_.

![Выбор дистрибутива](/attachments/download/2399)

Рис. 2 Выбор дистрибутива

Если у вас есть другие дистрибутивы Calculate Linux, вы можете использовать их для установки, указав путь к файлу образа. Среди дополнительных параметров доступны фильтр по дистрибутиву и фильтр по архитектуре процессора.

### Распределение места на диске[¶](#Распределение-места-на-диске)

В данной версии программы установки вы не можете изменить существующие разделы. Для этого, в зависимости от того, какой дистрибутив вы используете, можно воспользоваться программой GParted или PartitionManager, либо cfdisk, fdisk или gdisk, работающими из консоли во всех версиях Calculate Linux.

![Распределение места на диске](/attachments/download/2400)

Рис. 3 Распределение места на диске

Если вы готовы использовать весь жёсткий диск под систему, воспользуйтесь авторазметкой, либо выберите пункт "использовать существующие разделы" для указания одного или нескольких разделов жёсткого диска для установки.
При выборе авторазметки вы можете воспользоваться дополнительными параметрами:

* _Параметры авторазметки_ - здесь вы можете указать, на сколько разделов будет разбит ваш жёсткий диск;
* _Устройства для установки_ - выбор устройств для установки;
* _Таблица разделов_ - выбор типа таблицы разделов ("DOS-type Partition Table" или "GUID Partition Table (GPT)");
* _Размер корневого раздела_ - размер корневого раздела в мегабайтах (размеру 20 Гб будет соответствовать значение `20480`).

### Точки монтирования[¶](#Точки-монтирования)
При выборе авторазметки на шаге _Распределение места на диске_ данный шаг будет **недоступен для редактирования**.  
Основным параметром является выбор точек монтирование в виде таблицы _"Разметка"_:

* для изменения значения в строке нажмите на неё и в открывшемся окне введите необходимые значения;
* для добавления новой точки монтирования нажмите на кнопку "+" (плюс) над таблицей;
* для удаления точек монтирования установите флажки слева от необходимых строк и нажмите на кнопку "-" (минус) над таблицей;
* для восстановления первоначальных значений ячеек таблицы нажмите на третью кнопку "возврата" (стрелка) над таблицей;
* для очистки всей таблицы нажмите на четвёртую кнопку "очистки" над таблицей.

В столбце _"Диск или директория"_ указывается диск (директория) для монтирования. Во втором столбце _"Точка монтирования"_ указывается куда этот диск (директория) будут примонтированы. В третьем столбце _"Файловая система"_ указывается, какую файловую систему необходимо использовать для данного диска. В столбце _"Форматировать"_ указывается, следует ли форматировать диск. Если указанная файловая система не совпадает с текущей, то диск будет отформатирован. В последнем столбце _"Размер"_ указан размер выбранного диска (директории).
Среди дополнительных параметров можно:

* установить режим сборки;
* установить использование UUID-дисков;
* выбрать тип установки (Жёсткий диск, USB Flash или USB жёсткий диск);
* выбрать загрузочный диск;
* выбрать I/O планировщик (Deadline, CFQ, No-op).

![Точки монтирования](/attachments/download/2401)

Рис. 4 Выбор точек монтирования

### Сетевые настройки[¶](#Сетевые-настройки)
Для настроек сети необходимо:

* выбрать менеджер сети (NetworkManager или OpenRC);
* настроить адреса для интерфейсов в виде таблицы со столбцами:
  1. использование DHCP;
  2. IP-адрес для сетевого интерфейса;
  3. маска сети;

* ввести имя хоста (короткое или полное);
* ввести сервер времени.
Также с помощью дополнительных параметров можно указать:

* сервер доменных имён;
* домены для поиска;
* таблицу маршрутизации в виде таблицы со столбцами:
  1. сеть;
  2. шлюз;
  3. интерфейс;
  4. исходный IP.

![Сетевые настройки](/attachments/download/2402)

Рис. 5 Сетевые настройки

### Пользователи[¶](#Пользователи)

Настройка пользователей осуществляется изменением таблицы _"Переносимые пользователи"_ со столбцами _"Логин"_ и _"Пароль"_. Работа с таблицей _"Переносимые пользователи"_ аналогична работе с таблицей _"Разметка"_ на шаге _"Точки монтирования"_, рассмотренной выше.  
Особенностью является ввод пароля для пользователей, который требует повторного ввода и не отображается в явном виде.

Также из выпадающего списка можно выбрать пользователя для автовхода.

![Пользователи](/attachments/download/2431)

Рис. 6 Настройка пользователей

### Видео[¶](#Видео)
Настройка видео состоит из четырёх параметров:

1. Выбор видеодрайвера Xorg из списка (если необходимый драйвер отсутствует в списке, впишите его название);
2. Включение композита;
3. Установка разрешения экрана (если необходимое значение отсутствует в списке, впишите его);
4. Установка разрешения фреймбуфера (если необходимое значение отсутствует в списке, впишите его);

![Видео](/attachments/download/2396)

Рис. 7 Настройка видео

### Начать установку[¶](#Начать-установку)

Последний шаг является информационным и отображает значения всех параметров, которые будут использоваться при установке.  
Для начала установки нажмите на кнопку _"Установка"_.

![Начать установку](/attachments/download/2397)

Рис. 8 Просмотр параметров и начало установки

## Установка системы из консоли[¶](#Установка-системы-из-консоли)

Для установки системы из консоли используйте команду:  

    
    cl-install
    

cl-install представляет собой символическую ссылку на метод [сервера утилит](сервера утилит.html):  

    
    cl-core --method install
    

Символические ссылки на методы можно создать с помощью команды cl-core --create-symlink.

В этом случае система предложит установить систему с параметрами по умолчанию.
Для просмотра всех доступных параметров установки системы используйте команду  

    
    cl-install --help
    

  
Все доступные параметры разделены на группы (дублируют шаги в графическом клиенте):

* Язык и локаль
* Выбор дистрибутива
* Распределение места на диске
* Точки монтирования
* Сетевые настройки
* Пользователи
* Видео

#### Язык и локаль
Доступные параметры:

* `-l LANG, --lang LANG` - установка языка
* `--timezone TIMEZONE` - установка часового пояса

Пример:  

    
    cl-install -l ru_RU --timezone Europe/Moscow
    

#### Выбор дистрибутива
Доступные параметры:

* `--iso IMAGE` - ISO образ для установки
* `-s SYSTEM, --os SYSTEM` - выбор операционной системы (CDS,CLDG,CLD,CLDX,CLS,CMC,CSS или Gentoo)
* `--march ARCH` - выбор архитектуры процессора (auto,i686 или x86\_64)

Пример:  

    
    cl-install --iso /var/calculate/linux/cld-20110904-x86_64.iso
    cl-install -s CLDX --march i686
    

В первом примере выбран конкретный образ дистрибутива, а во втором сервер утилит будет искать 32-битный образ CLDX среди доступных.

#### Распределение места на диске
Доступные параметры:

* `--autopartition` - использовать авторазметку;
* `--auto-scheme AUTOPARTOPTS` - параметры авторазметки (swap,root,data,home,boot,uefi,grub или lvm);
* `-D DEVICE` - установить диск для авторазметки;
* `--partition-table TABLE` - установить таблицу разделов для авторазметки (dos или gpt);
* `--root-size SIZE` - установить размер корневого раздела для авторазметки.
* `--swap-size SIZE` - установить размер раздела подкачки для авторазметки.

Параметр --auto-scheme, используемый при авторазметке, может принимать одно или несколько значений из swap,root,data,home,boot,lvm,uefi,grub, где  
swap - использовать раздел подкачки;  
root - использовать дополнительный корневой раздел;  
data - использовать раздел /var/calculate;  
home - подключить /var/calculate/home к /home;  
boot - использовать отдельный boot раздел;  
grub - создать bios\_grub раздел;  
uefi - использовать UEFI загрузчик;  
lvm - использовать LVM.

Примеры:  

    
    cl-install --autopartition on --auto-scheme swap,root,data,home -D /dev/sda
    

Для установки будет использован диск /dev/sda с авторазметкой, будут использованы разделы подкачки, /var/calculate, дополнительный корневой раздел и подключён /var/calculate/home к /home.

    
    cl-install --autopartition --partition-table dos --root-size 10240
    

При установке будет использована авторазметка, таблица разделов для авторазметки установится в значение dos и размер корневого раздела в 10 Гигабайт.

#### Точки монтирования
Доступные параметры:

* `-d DISKS, --disk DISKS` - установка точки монтирования;
* `--build [ON/OFF]` - установка для сборки;
* `--uuid [ON/OFF]` - использовать UUID;
* `--type DISKTYPE` - тип устройства для устанавливаемой системы (hdd, flash или usb-hdd);
* `--mbr MBR` - загрузочный диск для устанавливаемой системы;
* `--scheduler SCHEDULER` - установить I/O планировщик (deadline, cfq или noop).
* `--uefi [ON/OFF]` - использовать загрузку UEFI

Пример:  

    
    cl-install -d /dev/sda2:/:ext4:on -d /dev/sda3:/var/calculate:reiserfs -d /dev/sda1:swap --scheduler cfq
    

Диск /dev/sda2 (первый параметр после ключа -d) будет примонтирован в корень (второй параметр) и будет обязательно отформатирован (четвёртый параметр "on") в файловую систему ext4 (третий параметр).  
Диск /dev/sda3 будет примонтирован в /var/calculate и отформатирован в файловую систему reiserfs, только если в текущий момент имеет другую файловую систему; если текущая файловая система reiserfs, то форматироваться не будет.  
Диск /dev/sda1 будет примонтирован для swap.  
Будет использован I/O планировщик cfq.

#### Сетевые настройки
Доступные параметры:

* `--netconf NETMANAGER` - выбор менеджера сети (networkmanager или openrc)
* `--iface IFACE_SETTINGS` - установка адреса для сетевого интерфейса
* `--hostname HOSTNAME` - установка короткого или полного имени хоста
* `--ntp NTP` - установка NTP сервера для системы
* `--dns DNS` - установка серверов доменных имен (разделитель - запятая)
* `--domain-search DOMAINS` - установка доменов для поиска (разделитель - запятая)
* `--route NETROUTE` - добавить правило маршрутизации (формат NETWORK:\[GATEWAY\]\[:DEV\[:SOURCE\]\])

Пример:  

    
    cl-install --netconf openrc --iface eth0:192.168.1.47:24 --hostname iivanov.company.ru --route default:192.168.1.1:eth0:192.168.1.47
    

Данной командой в качестве менеджера сети будет установлен openrc, для сетевого интерфейса eth0 отключится DHCP, установится IP-адрес 192.168.1.47 и маска сети 255.255.255.0\. Также будет задано имя хоста iivanov.company.ru и маршрутизация для сетевого интерфейса eth0 по умолчанию через 192.168.1.1\.

#### Пользователи
Доступные параметры:

* `-u USERS, --users USERS` - добавить пользователя в установленную систему
* `-A USER, --autologin USER` - указать пользователя для автовхода в установленную систему
* @-C \[ON/OFF\] --crypt-home \[ON/OFF\] - шифровать пользовательские профили

Примеры:  

    
    cl-install -u root -u user1
    

В установленной системе будут пользователи root и user1\. Автовход выполняться не будет.

    
    cl-install -u root -u user1 -u guest -A user1
    

В установленной системе будут пользователи root, guest и user1\. Автовход будет установлен для пользователя user1\.

#### Видео
Доступные параметры:

* `--video VIDEODRV` - установить видео драйвер
* `--composite [ON/OFF}` - установить композит
* `-X <width>x<height>` - установить разрешение Xorg
* `--fb <width>x<height>` - установить разрешение фреймбуфера
* `--grub-terminal TERMINAL` - установить grub-терминал (console,gfxterm)

Пример:  

    
    cl-install --video nouveau -X 1920x1080 --fb 1920x1080-32 --composite
    

В установленной системе будет использованы драйвер nouveau, разрешение Xorg 1920x1080, разрешение фреймбуфера 1920x1080-32 и композит.

## Помощь[¶](#Помощь)

Если установка системы вызвала сложности или вы хотите поделиться своим впечатлением, зайдите на _IRC_ канал _\#calculate-ru_ (сервер FreeNode) сообщества пользователей Calculate Linux. Для этого кликните на иконке "Сообщество Calculate Linux" на вашем рабочем столе.